##集中器（GPRS和蓝牙接口）##

###目录介绍###
* [archive](./archive)目录主要存储了以前写的集中器程序，是老的版本，现在不用了
* [bugs](./bugs)目录主要是之前碰到的一些bug的记录
* [config](./config)是板子**首次**使用时要进行的配置项
* [include](./include)包含了一些**自定义**的头文件，一般有**.h**和**.c**文件，
  一般在主程序中将**.h**文件include进来，并在编译主程序文件时添加**.c**文件在后面
* [test](./test)包含了单个模块功能测试的程序，如**AT24C128**和**DS1307**等，建议在加入新的
  模块时先针对模块写测试程序，再将测试程序加到主程序中

###功能介绍###
[主程序](./ZigbeeCoordinator_gprs.c)主要实现功能：
和采集器通信，接收采集器发来的故障数据(**剩余电流**或者**电压故障**)，并通过**GPRS**模块
将数据发送到云服务器，服务器目前的**IP**是**121.43.109.2**，同时接收服务器发来的查询实时
数据命令，命令主要有**单个查询**和**全部查询**两种，将查询命令转发给采集器，同时把采集器
发回的数据发送给服务器，其本质是一个中转站

###程序主体介绍###
main函数中主要做两件事情：

1. 查看ZigBee端是否收到数据，收到数据则调用函数处理数据
2. 查看GPRS端是否收到数据，收到数据则调用对应的数据处理函数

###其他###
1. 服务器端的数据接收程序放在[**SocketReceiver**](https://github.com/North114/SocketReceiver)
这个**Repo**里面，具体见该**Repo**的介绍
2. 蓝牙部分的功能现在没有用到，其主要思想是将采集器发来的故障数据存放到**AT24C128**这个**EEPROM**
中，等待蓝牙**APP**来查询这些数据，其实质就是它是一个被动的设备，不会主动发送数据了，因为它自己
不缺定用户的蓝牙设备是否连接上了，另外用户不可能守着集中器连在那里
3. 程序中的数据包格式要注意和**采集器**和**服务器**端的数据包匹配，一旦修改了集中器中的数据包
格式，相应的**采集器**或者**服务器**端的数据包格式也要修改
